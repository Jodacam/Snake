<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>

<head>
    <title>Inicio</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <link rel="stylesheet" href="style.css"></link>
    <div>Introduce tu nombre</div>
    <input id="inputField" type="text"> </input>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $(document).keydown(e => {
            var code = e.keyCode;
            if (code === 13) {
                var name = $("#inputField").val();
                if (name === "") {
                    window.alert("vacio");
                } else {
                    let n = $("#inputField").val();
                    $.ajax({
                        method: "POST",
                        url: "http://" + window.location.host + "/games/names",
                        data: n
                    })
                        .done(function (msg) {
                            alert("Data Saved: " + msg);
                            if (msg === 1) {
                                window.sessionStorage.setItem("name", name);
                                window.location = "http://" + window.location.host + "/lobby.html";
                            } else {
                                window.alert("Nombre ya en uso");
                            }

                        });
                    //window.sessionStorage.setItem("name", name);
                    //window.location = "http://" + window.location.host + "/lobby.html";
                }
            }
        })
    </script>
</body>

</html>